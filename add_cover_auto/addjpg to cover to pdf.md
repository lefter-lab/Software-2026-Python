# addjpg to cover to pdf

Кратко ръководство за добавяне на JPG като корица на PDF (fast, без тежко рендиране).

## Какво има в проекта
- `add_cover_fast.py` — бърз вариант с `img2pdf` + `pypdf` (конвертира JPG директно и го вмъква отпред).
 - `add_cover_fast.py` — бърз вариант с `img2pdf` + `pypdf` (конвертира JPG директно и го вмъква отпред). Това е най-бързият метод (около 20 сек) и се препоръчва да се използва по подразбиране.
- `add_cover_match_pdf.py` — прави корицата със същия size като първата страница на PDF-а; поддържа `fill` или `into` режим.

## Инсталиране (Windows, cmd в папката на проекта)
```bat
py -m pip install -U pip
py -m pip install img2pdf pypdf
```

## Бързо пускане
- За автоматично изпълнение с текущите имена (в папката):
```bat
py add_cover_fast.py
```
- Препоръчително: `add_cover_fast.py` е най-бързият метод (≈20 сек) — използвайте го по подразбиране за бързи ъпдейти на корици.
- За да напасне корицата към размера на първата страница (без/с crop):
```bat
py add_cover_match_pdf.py
```

## Скрипт с CLI (препоръчано)
Файл: `add_cover_match_pdf.py` вече приема аргументи от командния ред:

- `cover` — път до JPG корицата (по подразбиране: `Древното сърце заглавна.jpg`)
- `input_pdf` — път до входния PDF (по подразбиране: `Древното сърце Избрано от Елеазар Хараш и Старците.pdf`)
- `output_pdf` — път до изходния PDF (по подразбиране: `Древното сърце Избрано от Елеазар Хараш и Старците Загл.pdf`)
- `--mode` — `fill` (default) или `into` — определя дали изображението да запълни страницата (може crop) или да влезе цело (може полета).

Примери:
```bat
# използва default файловете в папката
py add_cover_match_pdf.py

# задаване на собствени файлове и mode
py add_cover_match_pdf.py "cover.jpg" "input.pdf" "output.pdf" --mode into
```

## Как работи (технически)
- Скриптът чете `MediaBox` от първата страница на `input_pdf` и извежда този размер в PDF точки.
- Използва `img2pdf` с layout функция за съответния page size и `FitMode` (fill/into), за да генерира корица с точния размер.
- След това вмъква корицата като първа страница и добавя останалите страници от входния PDF.

---
Ако искаш, мога да добавя и опция `--batch` за обработка на всички PDF файлове в папката, или да пусна скрипта за цялата колекция.

## Режими за оразмеряване
- `fill` — запълва страницата (без бели полета), може да изреже част от изображението (recommended за корици).
- `into` — вмества цялото изображение без изрязване, може да останат бели полета.

За `add_cover_match_pdf.py` променяй променливата `mode = "fill"` на `"into"` ако искаш без изрязване.

## Примерни файлове (в проекта)
- Корица: `Древното сърце заглавна.jpg`
- Входен PDF: `Древното сърце Избрано от Елеазар Хараш и Старците.pdf`
- Изходен PDF: `Древното сърце Избрано от Елеазар Хараш и Старците Загл.pdf`

## Забележки
- `img2pdf` вгражда изображението без посредник (по-бързо и по-леко от PIL за нашия случай).
- Ако искаш, мога да добавя CLI аргументи (cover, input, output, mode) в `add_cover_match_pdf.py` за по-гъвкаво използване.

---
Файлът е създаден автоматично в папката на проекта.
